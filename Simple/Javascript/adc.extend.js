
/***************************
png透明修正
DD_belatedPNG.fix('.png_bg');
DD_belatedPNG.fixPng( someNode );
****************************/
if ($.browser.msie && ($.browser.version == "6.0") && !$.support.style) {
    var DD_belatedPNG = { ns: "DD_belatedPNG", imgSize: {}, delay: 10, nodesFixed: 0, createVmlNameSpace: function () { if (document.namespaces && !document.namespaces[this.ns]) { document.namespaces.add(this.ns, "urn:schemas-microsoft-com:vml") } }, createVmlStyleSheet: function () { var b, a; b = document.createElement("style"); b.setAttribute("media", "screen"); document.documentElement.firstChild.insertBefore(b, document.documentElement.firstChild.firstChild); if (b.styleSheet) { b = b.styleSheet; b.addRule(this.ns + "\\:*", "{behavior:url(#default#VML)}"); b.addRule(this.ns + "\\:shape", "position:absolute;"); b.addRule("img." + this.ns + "_sizeFinder", "behavior:none; border:none; position:absolute; z-index:-1; top:-10000px; visibility:hidden;"); this.screenStyleSheet = b; a = document.createElement("style"); a.setAttribute("media", "print"); document.documentElement.firstChild.insertBefore(a, document.documentElement.firstChild.firstChild); a = a.styleSheet; a.addRule(this.ns + "\\:*", "{display: none !important;}"); a.addRule("img." + this.ns + "_sizeFinder", "{display: none !important;}") } }, readPropertyChange: function () { var b, c, a; b = event.srcElement; if (!b.vmlInitiated) { return } if (event.propertyName.search("background") != -1 || event.propertyName.search("border") != -1) { DD_belatedPNG.applyVML(b) } if (event.propertyName == "style.display") { c = (b.currentStyle.display == "none") ? "none" : "block"; for (a in b.vml) { if (b.vml.hasOwnProperty(a)) { b.vml[a].shape.style.display = c } } } if (event.propertyName.search("filter") != -1) { DD_belatedPNG.vmlOpacity(b) } }, vmlOpacity: function (b) { if (b.currentStyle.filter.search("lpha") != -1) { var a = b.currentStyle.filter; a = parseInt(a.substring(a.lastIndexOf("=") + 1, a.lastIndexOf(")")), 10) / 100; b.vml.color.shape.style.filter = b.currentStyle.filter; b.vml.image.fill.opacity = a } }, handlePseudoHover: function (a) { setTimeout(function () { DD_belatedPNG.applyVML(a) }, 1) }, fix: function (a) { if (this.screenStyleSheet) { var c, b; c = a.split(","); for (b = 0; b < c.length; b++) { this.screenStyleSheet.addRule(c[b], "behavior:expression(DD_belatedPNG.fixPng(this))") } } }, applyVML: function (a) { a.runtimeStyle.cssText = ""; this.vmlFill(a); this.vmlOffsets(a); this.vmlOpacity(a); if (a.isImg) { this.copyImageBorders(a) } }, attachHandlers: function (i) { var d, c, g, e, b, f; d = this; c = { resize: "vmlOffsets", move: "vmlOffsets" }; if (i.nodeName == "A") { e = { mouseleave: "handlePseudoHover", mouseenter: "handlePseudoHover", focus: "handlePseudoHover", blur: "handlePseudoHover" }; for (b in e) { if (e.hasOwnProperty(b)) { c[b] = e[b] } } } for (f in c) { if (c.hasOwnProperty(f)) { g = function () { d[c[f]](i) }; i.attachEvent("on" + f, g) } } i.attachEvent("onpropertychange", this.readPropertyChange) }, giveLayout: function (a) { a.style.zoom = 1; if (a.currentStyle.position == "static") { a.style.position = "relative" } }, copyImageBorders: function (b) { var c, a; c = { borderStyle: true, borderWidth: true, borderColor: true }; for (a in c) { if (c.hasOwnProperty(a)) { b.vml.color.shape.style[a] = b.currentStyle[a] } } }, vmlFill: function (e) { if (!e.currentStyle) { return } else { var d, f, g, b, a, c; d = e.currentStyle } for (b in e.vml) { if (e.vml.hasOwnProperty(b)) { e.vml[b].shape.style.zIndex = d.zIndex } } e.runtimeStyle.backgroundColor = ""; e.runtimeStyle.backgroundImage = ""; f = true; if (d.backgroundImage != "none" || e.isImg) { if (!e.isImg) { e.vmlBg = d.backgroundImage; e.vmlBg = e.vmlBg.substr(5, e.vmlBg.lastIndexOf('")') - 5) } else { e.vmlBg = e.src } g = this; if (!g.imgSize[e.vmlBg]) { a = document.createElement("img"); g.imgSize[e.vmlBg] = a; a.className = g.ns + "_sizeFinder"; a.runtimeStyle.cssText = "behavior:none; position:absolute; left:-10000px; top:-10000px; border:none; margin:0; padding:0;"; c = function () { this.width = this.offsetWidth; this.height = this.offsetHeight; g.vmlOffsets(e) }; a.attachEvent("onload", c); a.src = e.vmlBg; a.removeAttribute("width"); a.removeAttribute("height"); document.body.insertBefore(a, document.body.firstChild) } e.vml.image.fill.src = e.vmlBg; f = false } e.vml.image.fill.on = !f; e.vml.image.fill.color = "none"; e.vml.color.shape.style.backgroundColor = d.backgroundColor; e.runtimeStyle.backgroundImage = "none"; e.runtimeStyle.backgroundColor = "transparent" }, vmlOffsets: function (d) { var h, n, a, e, g, m, f, l, j, i, k; h = d.currentStyle; n = { W: d.clientWidth + 1, H: d.clientHeight + 1, w: this.imgSize[d.vmlBg].width, h: this.imgSize[d.vmlBg].height, L: d.offsetLeft, T: d.offsetTop, bLW: d.clientLeft, bTW: d.clientTop }; a = (n.L + n.bLW == 1) ? 1 : 0; e = function (b, p, q, c, s, u) { b.coordsize = c + "," + s; b.coordorigin = u + "," + u; b.path = "m0,0l" + c + ",0l" + c + "," + s + "l0," + s + " xe"; b.style.width = c + "px"; b.style.height = s + "px"; b.style.left = p + "px"; b.style.top = q + "px" }; e(d.vml.color.shape, (n.L + (d.isImg ? 0 : n.bLW)), (n.T + (d.isImg ? 0 : n.bTW)), (n.W - 1), (n.H - 1), 0); e(d.vml.image.shape, (n.L + n.bLW), (n.T + n.bTW), (n.W), (n.H), 1); g = { X: 0, Y: 0 }; if (d.isImg) { g.X = parseInt(h.paddingLeft, 10) + 1; g.Y = parseInt(h.paddingTop, 10) + 1 } else { for (j in g) { if (g.hasOwnProperty(j)) { this.figurePercentage(g, n, j, h["backgroundPosition" + j]) } } } d.vml.image.fill.position = (g.X / n.W) + "," + (g.Y / n.H); m = h.backgroundRepeat; f = { T: 1, R: n.W + a, B: n.H, L: 1 + a }; l = { X: { b1: "L", b2: "R", d: "W" }, Y: { b1: "T", b2: "B", d: "H"} }; if (m != "repeat" || d.isImg) { i = { T: (g.Y), R: (g.X + n.w), B: (g.Y + n.h), L: (g.X) }; if (m.search("repeat-") != -1) { k = m.split("repeat-")[1].toUpperCase(); i[l[k].b1] = 1; i[l[k].b2] = n[l[k].d] } if (i.B > n.H) { i.B = n.H } d.vml.image.shape.style.clip = "rect(" + i.T + "px " + (i.R + a) + "px " + i.B + "px " + (i.L + a) + "px)" } else { d.vml.image.shape.style.clip = "rect(" + f.T + "px " + f.R + "px " + f.B + "px " + f.L + "px)" } }, figurePercentage: function (d, c, f, a) { var b, e; e = true; b = (f == "X"); switch (a) { case "left": case "top": d[f] = 0; break; case "center": d[f] = 0.5; break; case "right": case "bottom": d[f] = 1; break; default: if (a.search("%") != -1) { d[f] = parseInt(a, 10) / 100 } else { e = false } } d[f] = Math.ceil(e ? ((c[b ? "W" : "H"] * d[f]) - (c[b ? "w" : "h"] * d[f])) : parseInt(a, 10)); if (d[f] % 2 === 0) { d[f]++ } return d[f] }, fixPng: function (c) { c.style.behavior = "none"; var g, b, f, a, d; if (c.nodeName == "BODY" || c.nodeName == "TD" || c.nodeName == "TR") { return } c.isImg = false; if (c.nodeName == "IMG") { if (c.src.toLowerCase().search(/\.png$/) != -1) { c.isImg = true; c.style.visibility = "hidden" } else { return } } else { if (c.currentStyle.backgroundImage.toLowerCase().search(".png") == -1) { return } } g = DD_belatedPNG; c.vml = { color: {}, image: {} }; b = { shape: {}, fill: {} }; for (a in c.vml) { if (c.vml.hasOwnProperty(a)) { for (d in b) { if (b.hasOwnProperty(d)) { f = g.ns + ":" + d; c.vml[a][d] = document.createElement(f) } } c.vml[a].shape.stroked = false; c.vml[a].shape.appendChild(c.vml[a].fill); c.parentNode.insertBefore(c.vml[a].shape, c) } } c.vml.image.shape.fillcolor = "none"; c.vml.image.fill.type = "tile"; c.vml.color.fill.on = false; g.attachHandlers(c); g.giveLayout(c); g.giveLayout(c.offsetParent); c.vmlInitiated = true; g.applyVML(c) } }; try { document.execCommand("BackgroundImageCache", false, true) } catch (r) { } DD_belatedPNG.createVmlNameSpace(); DD_belatedPNG.createVmlStyleSheet();
}



/***************************
https://github.com/carhartl/jquery-cookie
jQuery操作cookie的插件,大概的使用方法如下
$.cookie('the_cookie'); //读取Cookie值
$.cookie(’the_cookie’, ‘the_value’); //设置cookie的值
$.cookie(’the_cookie’, ‘the_value’, {expires: 7, path: ‘/’, domain: ‘jquery.com’, secure: true});//新建一个cookie 包括有效期 路径 域名等
$.cookie(’the_cookie’, ‘the_value’); //新建cookie
$.cookie(’the_cookie’, null); //删除一个cookie
****************************/
jQuery.cookie = function (A, B, C) { if (typeof B != 'undefined') { C = C || {}; if (B === null) { B = ''; C.expires = -1; } var D = ''; if (C.expires && (typeof C.expires == 'number' || C.expires.toUTCString)) { var E; if (typeof C.expires == 'number') { E = new Date(); E.setTime(E.getTime() + (C.expires * 24 * 60 * 60 * 1000)); } else { E = C.expires; } D = '; expires=' + E.toUTCString(); } var F = C.path ? '; path=' + (C.path) : ''; var G = C.domain ? '; domain=' + (C.domain) : ''; var H = C.secure ? '; secure' : ''; document.cookie = [A, '=', encodeURIComponent(B), D, F, G, H].join(''); } else { var I = null; if (document.cookie && document.cookie != '') { var J = document.cookie.split(';'); for (var K = 0; K < J.length; K++) { var L = jQuery.trim(J[K]); if (L.substring(0, A.length + 1) == (A + '=')) { I = decodeURIComponent(L.substring(A.length + 1)); break; } } } return I; } };

/***************
jQuery Timers 定时器
http://jquery.offput.ca/every/ 
$("#close-button").oneTime(1000,function(){});
$("#close-button").stopTime();
1. everyTime(时间间隔, [计时器名称], 函式名称, [次数限制], [等待函式程序完成])
2. oneTime(时间间隔, [计时器名称], 呼叫的函式)
3. stopTime ([计时器名称], [函式名称])
***************/
jQuery.fn.extend({ everyTime: function (A, B, C, D, E) { return this.each(function () { jQuery.timer.add(this, A, B, C, D, E); }); }, oneTime: function (A, B, C) { return this.each(function () { jQuery.timer.add(this, A, B, C, 1); }); }, stopTime: function (A, B) { return this.each(function () { jQuery.timer.remove(this, A, B); }); } }); jQuery.extend({ timer: { guid: 1, global: {}, regex: /^([0-9]+)\s*(.*s)?$/, powers: { 'ms': 1, 'cs': 10, 'ds': 100, 's': 1000, 'das': 10000, 'hs': 100000, 'ks': 1000000 }, timeParse: function (A) { if (A == undefined || A == null) return null; var B = this.regex.exec(jQuery.trim(A.toString())); if (B[2]) { var C = parseInt(B[1], 10); var D = this.powers[B[2]] || 1; return C * D; } else { return A; } }, add: function (A, B, C, D, E, F) { var G = 0; if (jQuery.isFunction(C)) { if (!E) E = D; D = C; C = B; } B = jQuery.timer.timeParse(B); if (typeof B != 'number' || isNaN(B) || B <= 0) return; if (E && E.constructor != Number) { F = !!E; E = 0; } E = E || 0; F = F || false; if (!A.$timers) A.$timers = {}; if (!A.$timers[C]) A.$timers[C] = {}; D.$timerID = D.$timerID || this.guid++; var H = function () { if (F && this.inProgress) return; this.inProgress = true; if ((++G > E && E !== 0) || D.call(A, G) === false) jQuery.timer.remove(A, C, D); this.inProgress = false; }; H.$timerID = D.$timerID; if (!A.$timers[C][D.$timerID]) A.$timers[C][D.$timerID] = window.setInterval(H, B); if (!this.global[C]) this.global[C] = []; this.global[C].push(A); }, remove: function (A, B, E) { var D = A.$D, ret; if (D) { if (!B) { for (B in D) this.remove(A, B, E); } else if (D[B]) { if (E) { if (E.$timerID) { window.clearInterval(D[B][E.$timerID]); delete D[B][E.$timerID]; } } else { for (var E in D[B]) { window.clearInterval(D[B][E]); delete D[B][E]; } } for (ret in D[B]) break; if (!ret) { ret = null; delete D[B]; } } for (ret in D) break; if (!ret) A.$D = null; } } } }); if (jQuery.browser.msie) jQuery(window).one("unload", function () { var A = jQuery.timer.global; for (var B in A) { var C = A[B], i = C.length; while (--i) jQuery.timer.remove(C[i], B); } });

/*******************
https://github.com/malsup/corner
基于jquery.corner.js
修正了按钮圆角的问题，调用了corner插件
$('.qmenu').corner("5px");
*******************/
if (!document.createElement('canvas').getContext) { (function () { var m = Math; var y = m.round; var z = m.sin; var A = m.cos; var Z = 10; var B = Z / 2; function getContext() { if (this.context_) { return this.context_ } return this.context_ = new CanvasRenderingContext2D_(this) } var C = Array.prototype.slice; function bind(f, b, c) { var a = C.call(arguments, 2); return function () { return f.apply(b, a.concat(C.call(arguments))) } } var D = { init: function (a) { if (/MSIE/.test(navigator.userAgent) && !window.opera) { var b = a || document; b.createElement('canvas'); b.attachEvent('onreadystatechange', bind(this.init_, this, b)) } }, init_: function (a) { if (!a.namespaces['g_vml_']) { a.namespaces.add('g_vml_', 'urn:schemas-microsoft-com:vml') } if (!a.styleSheets['ex_canvas_']) { var b = a.createStyleSheet(); b.owningElement.id = 'ex_canvas_'; b.cssText = 'canvas{display:inline-block;overflow:hidden;' + 'text-align:left;width:300px;height:150px}' + 'g_vml_\\:*{behavior:url(#default#VML)}' } }, i: function (a) { if (!a.getContext) { a.getContext = getContext; a.attachEvent('onpropertychange', onPropertyChange); a.attachEvent('onresize', onResize); var b = a.attributes; if (b.width && b.width.specified) { a.style.width = b.width.nodeValue + 'px' } else { a.width = a.clientWidth } if (b.height && b.height.specified) { a.style.height = b.height.nodeValue + 'px' } else { a.height = a.clientHeight } } return a } }; function onPropertyChange(e) { var a = e.srcElement; switch (e.propertyName) { case 'width': a.style.width = a.attributes.width.nodeValue + 'px'; a.getContext().clearRect(); break; case 'height': a.style.height = a.attributes.height.nodeValue + 'px'; a.getContext().clearRect(); break } } function onResize(e) { var a = e.srcElement; if (a.firstChild) { a.firstChild.style.width = a.clientWidth + 'px'; a.firstChild.style.height = a.clientHeight + 'px' } } D.init(); var E = []; for (var i = 0; i < 16; i++) { for (var j = 0; j < 16; j++) { E[i * 16 + j] = i.toString(16) + j.toString(16) } } function createMatrixIdentity() { return [[1, 0, 0], [0, 1, 0], [0, 0, 1]] } function processStyle(a) { var b, alpha = 1; a = String(a); if (a.substring(0, 3) == 'rgb') { var c = a.indexOf('(', 3); var d = a.indexOf(')', c + 1); var e = a.substring(c + 1, d).split(','); b = '#'; for (var i = 0; i < 3; i++) { b += E[Number(e[i])] } if (e.length == 4 && a.substr(3, 1) == 'a') { alpha = e[3] } } else { b = a } return [b, alpha] } function processLineCap(a) { switch (a) { case 'butt': return 'flat'; case 'round': return 'round'; case 'square': default: return 'square' } } function CanvasRenderingContext2D_(a) { this.m_ = createMatrixIdentity(); this.mStack_ = []; this.aStack_ = []; this.currentPath_ = []; this.strokeStyle = '#000'; this.fillStyle = '#000'; this.lineWidth = 1; this.lineJoin = 'miter'; this.lineCap = 'butt'; this.miterLimit = Z * 1; this.globalAlpha = 1; this.canvas = a; var b = a.ownerDocument.createElement('div'); b.style.width = a.clientWidth + 'px'; b.style.height = a.clientHeight + 'px'; b.style.overflow = 'hidden'; b.style.position = 'absolute'; a.appendChild(b); this.element_ = b; this.arcScaleX_ = 1; this.arcScaleY_ = 1 } var F = CanvasRenderingContext2D_.prototype; F.clearRect = function () { this.element_.innerHTML = ''; this.currentPath_ = [] }; F.beginPath = function () { this.currentPath_ = [] }; F.moveTo = function (a, b) { var p = this.getCoords_(a, b); this.currentPath_.push({ type: 'moveTo', x: p.x, y: p.y }); this.currentX_ = p.x; this.currentY_ = p.y }; F.lineTo = function (a, b) { var p = this.getCoords_(a, b); this.currentPath_.push({ type: 'lineTo', x: p.x, y: p.y }); this.currentX_ = p.x; this.currentY_ = p.y }; F.bezierCurveTo = function (a, b, c, d, e, f) { var p = this.getCoords_(e, f); var g = this.getCoords_(a, b); var h = this.getCoords_(c, d); this.currentPath_.push({ type: 'bezierCurveTo', cp1x: g.x, cp1y: g.y, cp2x: h.x, cp2y: h.y, x: p.x, y: p.y }); this.currentX_ = p.x; this.currentY_ = p.y }; F.fillRect = function (a, b, c, d) { this.beginPath(); this.moveTo(a, b); this.lineTo(a + c, b); this.lineTo(a + c, b + d); this.lineTo(a, b + d); this.closePath(); this.fill(); this.currentPath_ = [] }; F.createLinearGradient = function (a, b, c, d) { return new CanvasGradient_('gradient') }; F.createRadialGradient = function (a, b, c, d, e, f) { var g = new CanvasGradient_('gradientradial'); g.radius1_ = c; g.radius2_ = f; g.focus_.x = a; g.focus_.y = b; return g }; F.stroke = function (d) { var e = []; var f = false; var a = processStyle(d ? this.fillStyle : this.strokeStyle); var g = a[0]; var h = a[1] * this.globalAlpha; var W = 10; var H = 10; e.push('<g_vml_:shape', ' fillcolor="', g, '"', ' filled="', Boolean(d), '"', ' style="position:absolute;width:', W, ';height:', H, ';"', ' coordorigin="0 0" coordsize="', Z * W, ' ', Z * H, '"', ' stroked="', !d, '"', ' strokeweight="', this.lineWidth, '"', ' strokecolor="', g, '"', ' path="'); var j = false; var k = { x: null, y: null }; var l = { x: null, y: null }; for (var i = 0; i < this.currentPath_.length; i++) { var p = this.currentPath_[i]; var c; switch (p.type) { case 'moveTo': e.push(' m '); c = p; e.push(y(p.x), ',', y(p.y)); break; case 'lineTo': e.push(' l '); e.push(y(p.x), ',', y(p.y)); break; case 'close': e.push(' x '); p = null; break; case 'bezierCurveTo': e.push(' c '); e.push(y(p.cp1x), ',', y(p.cp1y), ',', y(p.cp2x), ',', y(p.cp2y), ',', y(p.x), ',', y(p.y)); break; case 'at': case 'wa': e.push(' ', p.type, ' '); e.push(y(p.x - this.arcScaleX_ * p.radius), ',', y(p.y - this.arcScaleY_ * p.radius), ' ', y(p.x + this.arcScaleX_ * p.radius), ',', y(p.y + this.arcScaleY_ * p.radius), ' ', y(p.xStart), ',', y(p.yStart), ' ', y(p.xEnd), ',', y(p.yEnd)); break } if (p) { if (k.x == null || p.x < k.x) { k.x = p.x } if (l.x == null || p.x > l.x) { l.x = p.x } if (k.y == null || p.y < k.y) { k.y = p.y } if (l.y == null || p.y > l.y) { l.y = p.y } } } e.push(' ">'); if (typeof this.fillStyle == 'object') { var m = { x: '50%', y: '50%' }; var n = l.x - k.x; var o = l.y - k.y; var q = n > o ? n : o; m.x = y(this.fillStyle.focus_.x / n * 100 + 50) + '%'; m.y = y(this.fillStyle.focus_.y / o * 100 + 50) + '%'; var r = []; if (this.fillStyle.type_ == 'gradientradial') { var s = this.fillStyle.radius1_ / q * 100; var t = this.fillStyle.radius2_ / q * 100 - s } else { var s = 0; var t = 100 } var u = { offset: null, color: null }; var v = { offset: null, color: null }; this.fillStyle.colors_.sort(function (a, b) { return a.offset - b.offset }); for (var i = 0; i < this.fillStyle.colors_.length; i++) { var w = this.fillStyle.colors_[i]; r.push(w.offset * t + s, '% ', w.color, ','); if (w.offset > u.offset || u.offset == null) { u.offset = w.offset; u.color = w.color } if (w.offset < v.offset || v.offset == null) { v.offset = w.offset; v.color = w.color } } r.pop(); e.push('<g_vml_:fill', ' color="', v.color, '"', ' color2="', u.color, '"', ' type="', this.fillStyle.type_, '"', ' focusposition="', m.x, ', ', m.y, '"', ' colors="', r.join(''), '"', ' opacity="', h, '" />') } else if (d) { e.push('<g_vml_:fill color="', g, '" opacity="', h, '" />') } else { var x = Math.max(this.arcScaleX_, this.arcScaleY_) * this.lineWidth; e.push('<g_vml_:stroke', ' opacity="', h, '"', ' joinstyle="', this.lineJoin, '"', ' miterlimit="', this.miterLimit, '"', ' endcap="', processLineCap(this.lineCap), '"', ' weight="', x, 'px"', ' color="', g, '" />') } e.push('</g_vml_:shape>'); this.element_.insertAdjacentHTML('beforeEnd', e.join('')) }; F.fill = function () { this.stroke(true) }; F.closePath = function () { this.currentPath_.push({ type: 'close' }) }; F.getCoords_ = function (a, b) { return { x: Z * (a * this.m_[0][0] + b * this.m_[1][0] + this.m_[2][0]) - B, y: Z * (a * this.m_[0][1] + b * this.m_[1][1] + this.m_[2][1]) - B} }; function CanvasPattern_() { } G_vmlCMjrc = D })() } if (jQuery.browser.msie) { document.execCommand("BackgroundImageCache", false, true) } (function ($) { var N = $.browser.msie; var O = N && !window.XMLHttpRequest; var P = $.browser.opera; var Q = typeof document.createElement('canvas').getContext == "function"; var R = function (i) { return parseInt(i, 10) || 0 }; var S = function (a, b, c) { var x = a, y; if (x.currentStyle) { y = x.currentStyle[b] } else if (window.getComputedStyle) { if (typeof arguments[2] == "string") b = c; y = document.defaultView.getComputedStyle(x, null).getPropertyValue(b) } return y }; var T = function (a, p) { return S(a, 'border' + p + 'Color', 'border-' + p.toLowerCase() + '-color') }; var U = function (a, p) { if (a.currentStyle && !P) { w = a.currentStyle['border' + p + 'Width']; if (w == 'thin') w = 2; if (w == 'medium' && !(a.currentStyle['border' + p + 'Style'] == 'none')) w = 4; if (w == 'thick') w = 6 } else { p = p.toLowerCase(); w = document.defaultView.getComputedStyle(a, null).getPropertyValue('border-' + p + '-width') } return R(w) }; var V = function (a, i) { return a.tagName.toLowerCase() == i }; var W = function (e, a, b, c, d) { if (e == 'tl') return a; if (e == 'tr') return b; if (e == 'bl') return c; if (e == 'br') return d }; var X = function (a, b, c, d, e, f, g) { var h, curve_to; if (d.indexOf('rgba') != -1) { var i = /^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/; var j = i.exec(d); if (j) { var k = [R(j[1]), R(j[2]), R(j[3])]; d = 'rgb(' + k[0] + ', ' + k[1] + ', ' + k[2] + ')' } } var l = a.getContext('2d'); if (b == 1 || g == 'notch') { if (e > 0 && b > 1) { l.fillStyle = f; l.fillRect(0, 0, b, b); l.fillStyle = d; h = W(c, [0 - e, 0 - e], [e, 0 - e], [0 - e, e], [e, e]); l.fillRect(h[0], h[1], b, b) } else { l.fillStyle = d; l.fillRect(0, 0, b, b) } return a } else if (g == 'bevel') { h = W(c, [0, 0, 0, b, b, 0, 0, 0], [0, 0, b, b, b, 0, 0, 0], [0, 0, b, b, 0, b, 0, 0], [b, b, b, 0, 0, b, b, b]); l.fillStyle = d; l.beginPath(); l.moveTo(h[0], h[1]); l.lineTo(h[2], h[3]); l.lineTo(h[4], h[5]); l.lineTo(h[6], h[7]); l.fill(); if (e > 0 && e < b) { l.strokeStyle = f; l.lineWidth = e; l.beginPath(); h = W(c, [0, b, b, 0], [0, 0, b, b], [b, b, 0, 0], [0, b, b, 0]); l.moveTo(h[0], h[1]); l.lineTo(h[2], h[3]); l.stroke() } return a } h = W(c, [0, 0, b, 0, b, 0, 0, b, 0, 0], [b, 0, b, b, b, 0, 0, 0, 0, 0], [0, b, b, b, 0, b, 0, 0, 0, b], [b, b, b, 0, b, 0, 0, b, b, b]); l.fillStyle = d; l.beginPath(); l.moveTo(h[0], h[1]); l.lineTo(h[2], h[3]); if (c == 'br') l.bezierCurveTo(h[4], h[5], b, b, h[6], h[7]); else l.bezierCurveTo(h[4], h[5], 0, 0, h[6], h[7]); l.lineTo(h[8], h[9]); l.fill(); if (e > 0 && e < b) { var m = e / 2; var n = b - m; h = W(c, [n, m, n, m, m, n], [n, n, n, m, m, m], [n, n, m, n, m, m, m, n], [n, m, n, m, m, n, n, n]); curve_to = W(c, [0, 0], [0, 0], [0, 0], [b, b]); l.strokeStyle = f; l.lineWidth = e; l.beginPath(); l.moveTo(h[0], h[1]); l.bezierCurveTo(h[2], h[3], curve_to[0], curve_to[1], h[4], h[5]); l.stroke() } return a }; var Y = function (p, a) { var b = document.createElement('canvas'); b.setAttribute("height", a); b.setAttribute("width", a); b.style.display = "block"; b.style.position = "absolute"; b.className = "jrCorner"; Z(p, b); if (!Q && N) { if (typeof G_vmlCanvasManager == "object") { b = G_vmlCanvasManager.initElement(b) } else if (typeof G_vmlCMjrc == "object") { b = G_vmlCMjrc.i(b) } else { throw Error('Could not find excanvas'); } } return b }; var Z = function (p, a) { if (p.is("table")) { p.children("tbody").children("tr:first").children("td:first").append(a); p.css('display', 'block') } else if (p.is("td")) { if (p.children(".JrcTdContainer").length === 0) { p.html('<div class="JrcTdContainer" style="padding:0px;position:relative;margin:-1px;zoom:1;">' + p.html() + '</div>'); p.css('zoom', '1'); if (O) { p.children(".JrcTdContainer").get(0).style.setExpression("height", "this.parentNode.offsetHeight") } } p.children(".JrcTdContainer").append(a) } else { p.append(a) } }; if (N) { var ba = document.createStyleSheet(); ba.media = 'print'; ba.cssText = '.jrcIECanvasDiv { display:none !important; }' } var bb = function (D) { if (this.length == 0 || !(Q || N)) { return this } if (D == "destroy") { return this.each(function () { var p, elm = $(this); if (elm.is(".jrcRounded")) { if (typeof elm.data("ie6tmr.jrc") == 'number') window.clearInterval(elm.data("ie6tmr.jrc")); if (elm.is("table")) p = elm.children("tbody").children("tr:first").children("td:first"); else if (elm.is("td")) p = elm.children(".JrcTdContainer"); else p = elm; p.children(".jrCorner").remove(); elm.unbind('mouseleave.jrc').unbind('mouseenter.jrc').removeClass('jrcRounded').removeData('ie6tmr.jrc'); if (elm.is("td")) elm.html(elm.children(".JrcTdContainer").html()) } }) } var o = (D || "").toLowerCase(); var E = R((o.match(/(\d+)px/) || [])[1]) || "auto"; var F = ((o.match(/(#[0-9a-f]+)/) || [])[1]) || "auto"; var G = /round|bevel|notch/; var H = ((o.match(G) || ['round'])[0]); var I = /hover/.test(o); var J = /oversized/.test(o); var K = o.match("hiddenparent"); if (N) { var G = /ie6nofix|ie6fixinit|ie6fixexpr|ie6fixonload|ie6fixwidthint|ie6fixheightint|ie6fixbothint/; var L = ((o.match(G) || ['ie6fixinit'])[0]) } var M = { tl: /top|left|tl/.test(o), tr: /top|right|tr/.test(o), bl: /bottom|left|bl/.test(o), br: /bottom|right|br/.test(o) }; if (!M.tl && !M.tr && !M.bl && !M.br) M = { tl: 1, tr: 1, bl: 1, br: 1 }; this.each(function () { var d = $(this), rbg = null, bg, s, b, pr; var a = this; var e = S(this, 'display'); var f = S(this, 'position'); var g = S(this, 'lineHeight', 'line-height'); if (F == "auto") { s = d.siblings(".jrcRounded:eq(0)"); if (s.length > 0) { b = s.data("rbg.jrc"); if (typeof b == "string") { rbg = b } } } if (K || rbg === null) { var h = this.parentNode, hidden_parents = new Array(), a = 0; while ((typeof h == 'object') && !V(h, 'html')) { if (K && S(h, 'display') == 'none') { hidden_parents.push({ originalvisibility: S(h, 'visibility'), elm: h }); h.style.display = 'block'; h.style.visibility = 'hidden' } var j = S(h, 'backgroundColor', 'background-color'); if (rbg === null && j != "transparent" && j != "rgba(0, 0, 0, 0)") { rbg = j } h = h.parentNode } if (rbg === null) rbg = "#ffffff" } if (F == "auto") { bg = rbg; d.data("rbg.jrc", rbg) } else { bg = F } if (e == 'none') { var k = S(this, 'visibility'); this.style.display = 'block'; this.style.visibility = 'hidden'; var l = true } else { var m = false } var n = d.height(); var p = d.width(); if (I) { var q = o.replace(/hover|ie6nofix|ie6fixinit|ie6fixexpr|ie6fixonload|ie6fixwidthint|ie6fixheightint|ie6fixbothint/g, ""); if (L != 'ie6nofix') q = "ie6fixinit " + q; d.bind("mouseenter.jrc", function () { d.addClass(d.attr("hoverclass")) }); d.bind("mouseleave.jrc", function () { d.removeClass(d.attr("hoverclass")) }) } if (O && L != 'ie6nofix') { this.style.zoom = 1; if (L != 'ie6fixexpr') { if (d.width() % 2 != 0) d.width(d.width() + 1); if (d.height() % 2 != 0) d.height(d.height() + 1) } $(window).load(function () { if (L == 'ie6fixonload') { if (d.css('height') == 'auto') d.height(d.css('height')); if (d.width() % 2 != 0) d.width(d.width() + 1); if (d.height() % 2 != 0) d.height(d.height() + 1) } else if (L == 'ie6fixwidthint' || L == 'ie6fixheightint' || L == 'ie6fixbothint') { var c, ie6FixFunction; if (L == 'ie6fixheightint') { ie6FixFunction = function () { d.height('auto'); var a = d.height(); if (a % 2 != 0) a = a + 1; d.css({ height: a }) } } else if (L == 'ie6fixwidthint') { ie6FixFunction = function () { d.width('auto'); var a = d.width(); if (a % 2 != 0) a = a + 1; d.css({ width: a }); d.data('lastWidth.jrc', d.get(0).offsetWidth) } } else if (L == 'ie6fixbothint') { ie6FixFunction = function () { d.width('auto'); d.height('auto'); var a = d.width(); var b = d.height(); if (b % 2 != 0) b = b + 1; if (a % 2 != 0) a = a + 1; d.css({ width: a, height: b }) } } c = window.setInterval(ie6FixFunction, 100); d.data("ie6tmr.jrc", c) } }) } var r = n < p ? this.offsetHeight : this.offsetWidth; if (E == "auto") { E = r / 2; if (E > 10) E = r / 4 } if (E > r / 2 && !J) { E = r / 2 } E = Math.floor(E); var t = U(this, 'Top'); var u = U(this, 'Right'); var v = U(this, 'Bottom'); var w = U(this, 'Left'); if (f == 'static' && !V(this, 'td')) { this.style.position = 'relative' } else if (f == 'fixed' && N && !(document.compatMode == 'CSS1Compat' && !O)) { this.style.position = 'absolute' } if (t + u + v + w > 0) { this.style.overflow = 'visible' } if (l) d.css({ display: 'none', visibility: k }); if (typeof hidden_parents != "undefined") { for (var i = 0; i < hidden_parents.length; i++) { hidden_parents[i].elm.style.display = 'none'; hidden_parents[i].elm.style.visibility = hidden_parents[i].originalvisibility } } var x = 0 - t, p_right = 0 - u, p_bottom = 0 - v, p_left = 0 - w; var y = (d.find("canvas").length > 0); if (y) { if (V(this, 'table')) pr = d.children("tbody").children("tr:first").children("td:first"); else if (V(this, 'td')) pr = d.children(".JrcTdContainer"); else pr = d } if (M.tl) { bordersWidth = t < w ? t : w; if (y) pr.children("canvas.jrcTL").remove(); var z = X(Y(d, E), E, 'tl', bg, bordersWidth, T(this, 'Top'), H); $(z).css({ left: p_left, top: x }).addClass('jrcTL') } if (M.tr) { bordersWidth = t < u ? t : u; if (y) pr.children("canvas.jrcTR").remove(); var A = X(Y(d, E), E, 'tr', bg, bordersWidth, T(this, 'Top'), H); $(A).css({ right: p_right, top: x }).addClass('jrcTR') } if (M.bl) { bordersWidth = v < w ? v : w; if (y) pr.children("canvas.jrcBL").remove(); var B = X(Y(d, E), E, 'bl', bg, bordersWidth, T(this, 'Bottom'), H); $(B).css({ left: p_left, bottom: p_bottom }).addClass('jrcBL') } if (M.br) { bordersWidth = v < u ? v : u; if (y) pr.children("canvas.jrcBR").remove(); var C = X(Y(d, E), E, 'br', bg, bordersWidth, T(this, 'Bottom'), H); $(C).css({ right: p_right, bottom: p_bottom }).addClass('jrcBR') } if (N) d.children('canvas.jrCorner').children('div').addClass('jrcIECanvasDiv'); if (O && L == 'ie6fixexpr') { if (M.bl) { B.style.setExpression("bottom", "this.parentNode.offsetHeight % 2 == 0 || this.parentNode.offsetWidth % 2 == 0 ? 0-(parseInt(this.parentNode.currentStyle['borderBottomWidth'])) : 0-(parseInt(this.parentNode.currentStyle['borderBottomWidth'])+1)") } if (M.br) { C.style.setExpression("right", "this.parentNode.offsetWidth  % 2 == 0 || this.parentNode.offsetWidth % 2 == 0 ? 0-(parseInt(this.parentNode.currentStyle['borderRightWidth']))  : 0-(parseInt(this.parentNode.currentStyle['borderRightWidth'])+1)"); C.style.setExpression("bottom", "this.parentNode.offsetHeight % 2 == 0 || this.parentNode.offsetWidth % 2 == 0 ? 0-(parseInt(this.parentNode.currentStyle['borderBottomWidth'])) : 0-(parseInt(this.parentNode.currentStyle['borderBottomWidth'])+1)") } if (M.tr) { A.style.setExpression("right", "this.parentNode.offsetWidth   % 2 == 0 || this.parentNode.offsetWidth % 2 == 0 ? 0-(parseInt(this.parentNode.currentStyle['borderRightWidth']))  : 0-(parseInt(this.parentNode.currentStyle['borderRightWidth'])+1)") } } d.addClass('jrcRounded') }); if (typeof arguments[1] == "function") arguments[1](this); return this }; $.fn.corner = bb })(jQuery);

/**********
http://bassistance.de/jquery-plugins/jquery-plugin-validation/
JQuery.validate Form验证插件
**********/
;(function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"),void 0;var c=a.data(this[0],"validator");return c?c:(c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){c.submitButton=this}),this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);return c.settings.submitHandler.call(c,c.currentForm),c.submitButton&&b.remove(),!1}return!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case"add":a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case"remove":if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}var i=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d);if(i.required){var j=i.required;delete i.required,i=a.extend({required:j},i)}return i}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}}),a.validator=function(b,c){this.settings=a.extend({},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1==arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!=Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(RegExp("\\{"+a+"\\}","g"),c)}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.errorsFor(a).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function d(b){var c=a.data(this[0].form,"validator");c.settings["on"+b.type]&&c.settings["on"+b.type].call(c,this[0])}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var b=this.groups={};a.each(this.settings.groups,function(c,d){a.each(d.split(/\s/),function(a,d){b[d]=c})});var c=this.settings.rules;a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",d).delegate("click",":radio, :checkbox, select, option",d),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.clean(b),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(var c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus()}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1==a.grep(this.errorList,function(a){return a.element.name==b.name}).length&&b},elements:function(){var b=this,c={};return a(":input",this.currentForm).not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},check:function(b){b=this.clean(b),this.checkable(b)&&(b=this.findByName(b.name)[0]);var c=a(b).rules(),d=!1;for(method in c){var e={method:method,parameters:c[method]};try{var f=a.validator.methods[method].call(this,b.value.replace(/\r/g,""),b,e.parameters);if("dependency-mismatch"==f){d=!0;continue}if(d=!1,"pending"==f)return this.toHide=this.toHide.not(this.errorsFor(b)),void 0;if(!f)return this.formatAndAdd(b,e),!1}catch(g){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+e.method+"' method",g),g}}return d?void 0:(this.objectLength(c)&&this.successList.push(b),!0)},customMetaMessage:function(b,c){if(a.metadata){var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;arguments.length>a;a++)if(void 0!==arguments[a])return arguments[a];return void 0},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;"function"==typeof c?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,"{$1}"),b.parameters)),this.errorList.push({message:c,element:a}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(var a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(var a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass().addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[b.name],c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0==this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={},d=a(b);for(method in a.validator.methods){var e=d.attr(method);e&&(c[method]=e)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return delete b[d],void 0;if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength","min","max"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b.messages&&delete b.messages,b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!=d?d:a.validator.messages[b],3>c.length&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case"select":var e=a(c).val();return e&&e.length>0;case"input":if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);if(this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d="string"==typeof d&&{url:d}||d,e.old!==b){e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),f.showErrors()}else{var i={},j=e.message=d||f.defaultMessage(c,"remote");i[c.name]=a.isFunction(j)?j(b):j,f.showErrors(i)}e.valid=g,f.stopRequest(c,g)}},d)),"pending"}return this.pending[c.name]?"pending":e.valid},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||d>=this.getLength(a.trim(b),c)},rangelength:function(b,c,d){var e=this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&d[1]>=e},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&c[1]>=a},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9-]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--){var g=a.charAt(f),d=parseInt(g,10);e&&(d*=2)>9&&(d-=9),c+=d,e=!e}return 0==c%10},accept:function(a,b,c){return c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(b)||a.match(RegExp(".("+c+")$","i"))},equalTo:function(b,c,d){var e=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return b==e.val()}}}),a.format=a.validator.format})(jQuery),function(a){var b=a.ajax,c={};a.ajax=function(d){d=a.extend(d,a.extend({},a.ajaxSettings,d));var e=d.port;return"abort"==d.mode?(c[e]&&c[e].abort(),c[e]=b.apply(this,arguments)):b.apply(this,arguments)}}(jQuery),function(a){a.each({focus:"focusin",blur:"focusout"},function(b,c){a.event.special[c]={setup:function(){return a.browser.msie?!1:(this.addEventListener(b,a.event.special[c].handler,!0),void 0)},teardown:function(){return a.browser.msie?!1:(this.removeEventListener(b,a.event.special[c].handler,!0),void 0)},handler:function(b){return arguments[0]=a.event.fix(b),arguments[0].type=c,a.event.handle.apply(this,arguments)}}}),a.extend(a.fn,{delegate:function(b,c,d){return this.bind(b,function(b){var e=a(b.target);return e.is(c)?d.apply(e,arguments):void 0})},triggerEvent:function(b,c){return this.triggerHandler(b,[a.event.fix({type:b,target:c})])}})}(jQuery);


//JQuery.validate-zh-cn语言包
; jQuery.extend(jQuery.validator.messages, { required: "必选字段", remote: "请修正该字段", email: "电子邮件格式有误", url: "请输入合法的网址", date: "请输入合法的日期", dateISO: "请输入合法的日期 (ISO).", number: "请输入合法的数字", digits: "只能输入整数", creditcard: "请输入合法的信用卡号", equalTo: "请再次输入相同的值", accept: "请输入拥有合法后缀名的字符串", maxlength: jQuery.validator.format("长度最多 {0} 个字符"), minlength: jQuery.validator.format("长度最少 {0} 个字符"), rangelength: jQuery.validator.format("长度要在 {0} 和 {1} 之间"), range: jQuery.validator.format("请输入一个介于 {0} 和 {1} 之间的值"), max: jQuery.validator.format("请输入一个最大为 {0} 的值"), min: jQuery.validator.format("请输入一个最小为 {0} 的值") });

/*
id tabs
选项卡插件
$("#usual1 ul").idTabs();
*/
;  (function () { var a = { jQuery: "http://code.jquery.com/jquery-latest.min.js" }, b = function () { (function (a) { a.fn.idTabs = function () { for (var b = {}, c = 0; arguments.length > c; ++c) { var d = arguments[c]; switch (d.constructor) { case Object: a.extend(b, d); break; case Boolean: b.change = d; break; case Number: b.start = d; break; case Function: b.click = d; break; case String: "." == d.charAt(0) ? b.selected = d : "!" == d.charAt(0) ? b.event = d : b.start = d } } return "function" == typeof b["return"] && (b.change = b["return"]), this.each(function () { a.idTabs(this, b) }) }, a.idTabs = function (b, c) { var d = a.metadata ? a(b).metadata() : {}, e = a.extend({}, a.idTabs.settings, d, c); "." == e.selected.charAt(0) && (e.selected = e.selected.substr(1)), "!" == e.event.charAt(0) && (e.event = e.event.substr(1)), null == e.start && (e.start = -1); var f = function () { if (a(this).is("." + e.selected)) return e.change; var c = "#" + this.href.split("#")[1], d = [], f = []; if (a("a", b).each(function () { this.href.match(/#/) && (d.push(this), f.push("#" + this.href.split("#")[1])) }), e.click && !e.click.apply(this, [c, f, b, e])) return e.change; for (i in d) a(d[i]).removeClass(e.selected); for (i in f) a(f[i]).hide(); return a(this).addClass(e.selected), a(c).show(), e.change }, g = a("a[href*='#']", b).unbind(e.event, f).bind(e.event, f); g.each(function () { a("#" + this.href.split("#")[1]).hide() }); var h = !1; return (h = g.filter("." + e.selected)).length || "number" == typeof e.start && (h = g.eq(e.start)).length || "string" == typeof e.start && (h = g.filter("[href*='#" + e.start + "']")).length, h && (h.removeClass(e.selected), h.trigger(e.event)), e }, a.idTabs.settings = { start: 0, change: !1, click: null, selected: ".selected", event: "!click" }, a.idTabs.version = "2.2", a(function () { a(".idTabs").idTabs() }) })(jQuery) }, c = function (a, b) { for (b = b.split("."); a && b.length; ) a = a[b.shift()]; return a }, e = document.getElementsByTagName("head")[0], f = function (a) { var b = document.createElement("script"); b.type = "text/javascript", b.src = a, e.appendChild(b) }, g = document.getElementsByTagName("script"), h = g[g.length - 1].src, j = !0; for (d in a) c(this, d) || (j = !1, f(a[d])); return j ? b() : (f(h), void 0) })();